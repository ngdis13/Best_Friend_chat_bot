from aiogram import Router, F
from aiogram.types import Message

from aiogram.utils.formatting import (
    Bold, as_list, as_marked_section
)
from aiogram.filters import Command, CommandObject

from aiogram import types


from keyboards import reply

from chat_ai_connect import chat_ai

router = Router()



@router.message(Command('start'))
async def start(message: Message):
    content = as_list(
        as_marked_section(
            Bold(f'‚ô° Hello, {message.from_user.first_name} ‚ô°'),
            '\n\n',
            Bold('–Ø - —Ç–≤–æ–π –ª—É—á—à–∏–π –¥—Ä—É–≥ –ö–∞–ø–∏–±–∞—Ä–∞ –∏ —è –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å —Ç–µ–±–µ –≤ –ª—é–±—É—é –º–∏–Ω—É—Ç—É ü•∫'),
            '\n\n',
            '–Ø –º–æ–≥—É:',
            '\n',
            '1. –ü–æ–±–æ–ª—Ç–∞—Ç—å —Å —Ç–æ–±–æ–π –ø–æ –¥—É—à–∞–º –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è –∏ –æ–±—Å—É–¥–∏—Ç—å —Ç—Ä–µ–≤–æ–∂–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã',
            '\n',
            '2. –°–æ –º–Ω–æ–π —Ç—ã –º–æ–∂–µ—à—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–≤–æ–π —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–æ–Ω —Å –ø–æ–º–æ—â—å—é –¥–Ω–µ–≤–Ω–∏–∫–∞ —ç–º–æ—Ü–∏–π',
            '\n',
            '3. –ï—Å–ª–∏ —Ç—ã —á—É–≤—Å—Ç–≤—É–µ—à—å –Ω–µ—Ö–≤–∞—Ç–∫—É –º–æ—Ç–∏–≤–∞—Ü–∏–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å, —Ç–æ —è –º–æ–≥—É –ø—Ä–∏—Å—ã–ª–∞—Ç—å —Ç–µ–±–µ –º–æ—Ç–∏–≤–∏—Ä—É—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è, '
            '–º—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–º–æ–∂–µ–º –ø–æ–¥–Ω—è—Ç—å —Ç–≤–æ—é –º–æ—Ç–∏–≤–∞—Ü–∏—é!',
            '\n',
            '4. –ö–æ–≥–¥–∞ —Ç–µ–±–µ —Ç—Ä—É–¥–Ω–æ –ø—Ä–∏–¥—É–º–∞—Ç—å –∏–¥–µ—é –¥–ª—è –∑–∞–Ω—è—Ç–∏—è, —Ç—ã –º–æ–∂–µ—à—å –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –æ—Ç –º–µ–Ω—è –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ',
            '\n\n',
            '–Ø –≤—Å–µ–≥–¥–∞ –Ω–∞ —Å–≤—è–∑–∏, –º–æ–π –¥–æ—Ä–æ–≥–æ–π –¥—Ä—É–≥!',
            marker=''
    )

    )
    await message.answer(**content.as_kwargs(), reply_markup=reply.main)

@router.message()
async def friend_dialog(message: types.Message):
    await message.answer('–ü—Ä–∏–≤–µ—Ç! –Ø —Ç–≤–æ–π –¥—Ä—É–≥, —Ä–∞—Å—Å–∫–∞–∂–∏, –∫–∞–∫ —Ç–≤–æ–∏ –¥–µ–ª–∞?')

    while True:
        if message.text != '–∑–∞–∫–æ–Ω—á–∏—Ç—å –¥–∏–∞–ª–æ–≥':
            msg = message.text
            await message.answer(chat_ai.ChatAi.gpt_chat(msg))
            print(msg)
            continue

